<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- https://threejs.org/docs/#manual/en/introduction/Installation -->
        <meta charset="utf-8">
        <title>My first three.js app</title>
        <style>
            body { margin: 0; }
            #THE_CONTAINER { width: 500px; height: 500px; background-color: gray; margin: 0; }
        </style>
    </head>
    <body>
        <script type="module">
            import * as main from "./main.js";
            window.main = main;
        </script>
        <script>
            function inputR() {
                var rStr = prompt("Input r:\nExample:\n1\n0\n101\n01001011001");
                console.log(rStr);
                main.setContainer(document.getElementById("THE_CONTAINER"));
                main.setR([...rStr]);
            }
            var nextOTColumn = 0;
            function getNextOTColumn() {
                let ans = nextOTColumn;
                nextOTColumn = (nextOTColumn + 1) % main.COL;
                return ans;
            }
            var hideIfLessThan = 0;
            function getNextHideShowFn() {
                let ans = (i) => i >= hideIfLessThan;
                hideIfLessThan = (hideIfLessThan + 1) % main.ROW;
                return ans;
            }
        </script>
        <button onclick="inputR()">input r</button>
        <button onclick="main.generateT()">generate T</button>
        <button onclick="main.computeT_XOR_r()">compute T⊕r</button><br>
        <button onclick="main.generateS()">generate s</button>
        <!-- <button onclick="main.obliviousTransferQ()">Oblivious Transfer q</button> -->
        <button onclick="main.obliviousTransferQColumn(getNextOTColumn())">Oblivious Transfer q *</button>
        <button onclick="main.computeQ_XOR_s()">compute Q⊕s</button>
        <button onclick="main.hideShowRows(getNextHideShowFn())">examine layers *</button>
        <div id="THE_CONTAINER"></div>
    </body>
</html>
