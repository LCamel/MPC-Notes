<style>

.node {
position: absolute;
background-color: gray;
display: grid;
place-items: center;
}
.textLine {
width: 50px;
height: 20px;
background-color: yellow;
display: grid;
place-items: center;
}
.cell {
width: 50px;
height: 20px;
border: 1px solid black;
}
.positionLabel {
position: absolute;
width: 50;
height: 50;
display: grid;
place-items: center;
}
.positionValue {
position: absolute;
width: 50;
height: 50;
border: 1px solid black;
display: grid;
place-items: center;
}

</style>

<div style="position: relative; width:500; height:500" id="treeContainer"></div>
<div style="position: relative" id="stashContainer"></div>
<div style="position: relative" id="positionContainer"></div>

<script>
const N = 8;
const L = 3;
const Z = 4;
const nodeWidth = 80;
const textLineHeight = 20;
const nodeHeight = (Z + 1) * textLineHeight;

function createNode(l, parent, path, container) {
    let node = document.createElement("div")
    node.className = "node";
    node.id = "id-" + path;
    for (let i = 0; i < Z; i++) {
        let textLine = document.createElement("div");
        textLine.className = "textLine";
        textLine.innerHTML = i;
        node.appendChild(textLine);
    }
    if (l == L) {
        node.style.left = (parseInt(path, 2) * nodeWidth * 1.2) + "px" ;
    } else {
        let c0 = createNode(l + 1, undefined, path + "0", container);
        let c1 = createNode(l + 1, undefined, path + "1", container);
        node.style.left = (c0.offsetLeft + c1.offsetLeft) / 2;
    }
    node.style.top = (L - l) * nodeHeight * 1.2;
    node.style.width = nodeWidth;
    node.style.height = nodeHeight;
    container.appendChild(node);
    return node;
}
createNode(0, undefined, "", document.querySelector("#treeContainer"));

function stashAppend(s) {
    let cell = document.createElement("span");
    cell.className = "cell";
    cell.innerText = s;
    let container = document.querySelector("#stashContainer");
    container.appendChild(cell);
}
stashAppend("aa");
stashAppend("bb");

let positionContainer = document.querySelector("#positionContainer");
for (let i = 0; i < N; i++) {
    let label = document.createElement("div");
    label.className = "positionLabel";
    label.innerText = i;
    label.style.left = 50 * i;
    positionContainer.appendChild(label);

    let value = document.createElement("div");
    value.className = "positionValue";
    value.innerText = Math.floor(Math.random() * N);
    value.style.left = 50 * i;
    value.style.top = 50;
    positionContainer.appendChild(value);
}


</script>
